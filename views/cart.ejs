<% include partials/header %>

<script>
  // On window load, print which items are added to the cart 
  window.onload = function() {
    if (sessionStorage.length === 0) {
      document.getElementById("cart").innerHTML += 
      '<div class="m-5">Your cart is empty</div>'
    }
    for (let i=0, len=sessionStorage.length; i<len; i++) {
      let key = sessionStorage.key(i);
      let value = JSON.parse(sessionStorage[key]);

      new_card = 
      '<div class="card mb-3" style="max-width: 540px;">\
        <div class="row no-gutters">\
          <div class="col-md-4">\
            <img src="' + value.image + '" class="card-img" alt="...">\
          </div>\
          <div class="col-md-8">\
            <div class="card-body">\
              <h5 class="card-title">' + key + '</h5>\
              <p class="card-text my-0">Quantity: ' + value.quantity + '</p>\
              <button class="btn btn-sm btn-danger" onclick="removeItem(\'' + key + '\');">Remove</button>\
            </div>\
          </div>\
        </div>\
      </div>';

      document.getElementById("cart").innerHTML += new_card;
    }

    // Update the cart item number
    updateCartItems();
  }
</script>

<div id="cart" class="container">
  <h1>Your Shopping Cart</h1>  
</div>

<% include partials/footer %>